.journal-view-container {
	padding: 24px;
	max-width: 1200px;
	margin: 0 auto;
	height: 100%;
	min-height: 100%;
	/* 手记应用风格：浅粉色背景 */
	background: #f5f0f1 !important;
	color: #1a1a1a !important;
	box-sizing: border-box;
	display: flex !important;
	flex-direction: column !important;
	overflow: hidden !important;
}

/* 暗色主题适配 */
.theme-dark .journal-view-container {
	background: #1e1e1e !important;
	color: #e0e0e0 !important;
}

.journal-scroll-container {
	flex: 1 1 0% !important;
	min-height: 0 !important;
	overflow-y: auto !important;
	overflow-x: hidden !important;
	width: 100% !important;
	position: relative !important;
	-webkit-overflow-scrolling: touch !important;
	overscroll-behavior: contain !important;
	background: transparent !important;
}

.journal-loading,
.journal-empty {
	text-align: center;
	padding: 40px 20px;
	color: var(--text-muted);
	font-size: 16px;
}

/* 头部容器（参考手记应用设计） */
.journal-header {
	margin-bottom: 30px;
	padding: 0;
	position: relative !important;
	/* 不固定定位，随内容滚动 */
	top: auto !important;
	left: auto !important;
	right: auto !important;
	bottom: auto !important;
	z-index: auto !important;
}

.journal-title-container {
	display: flex;
	align-items: center;
	justify-content: space-between;
	margin-bottom: 20px;
	gap: 16px;
}

.journal-title-header {
	font-size: 32px;
	font-weight: 700;
	margin: 0;
	/* 手记应用风格：深色标题 */
	color: #1a1a1a !important;
	line-height: 1.2;
	flex: 1;
}

.theme-dark .journal-title-header {
	color: #e0e0e0 !important;
}

.journal-create-button {
	display: flex;
	align-items: center;
	gap: 8px;
	padding: 10px 20px;
	font-size: 14px;
	font-weight: 500;
	color: #ffffff;
	background: var(--interactive-accent, #3b82f6);
	border: none;
	border-radius: 8px;
	cursor: pointer;
	transition: all 0.2s ease;
	box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
	white-space: nowrap;
}

.journal-create-button:hover {
	background: var(--interactive-accent-hover, #2563eb);
	transform: translateY(-1px);
	box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
}

.journal-create-button:active {
	transform: translateY(0);
	box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.journal-create-button svg {
	flex-shrink: 0;
}

.journal-create-button span {
	line-height: 1;
}

/* 统计信息（参考手记应用设计） */
.journal-stats {
	display: flex;
	gap: 24px;
	margin-bottom: 0;
	padding: 0;
	background: transparent !important;
	/* 完全透明，无背景色 */
	border-radius: 0;
	flex-wrap: nowrap;
	align-items: flex-start;
}

.journal-stat-item {
	display: flex;
	flex-direction: column;
	align-items: flex-start;
	gap: 4px;
	flex: 0 0 auto;
	min-width: auto;
}

.journal-stat-icon {
	font-size: 20px;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	margin-bottom: 2px;
}

.journal-stat-icon svg {
	width: 20px;
	height: 20px;
	flex-shrink: 0;
}

.journal-stat-icon-flame svg {
	color: #ef4444;
	/* 红色 */
}

.journal-stat-icon-message svg {
	color: #ef4444;
	/* 红色 */
}

.journal-stat-icon-calendar svg {
	color: #3b82f6;
	/* 蓝色 */
}

.journal-stat-value {
	font-size: 20px;
	font-weight: 600;
	/* 手记应用风格：深色数值 */
	color: #1a1a1a !important;
	line-height: 1.2;
	margin: 0;
}

.theme-dark .journal-stat-value {
	color: #e0e0e0 !important;
}

.journal-stat-label {
	font-size: 13px;
	/* 手记应用风格：灰色标签 */
	color: #666666 !important;
	line-height: 1.3;
	margin: 0;
}

.theme-dark .journal-stat-label {
	color: #999999 !important;
}

/* 月份分组 */
.journal-month-section {
	margin-bottom: 40px;
}

.journal-month-title {
	font-size: 20px;
	font-weight: 600;
	margin-bottom: 16px;
	/* 手记应用风格：深色月份标题 */
	color: #1a1a1a !important;
	padding-bottom: 8px;
	/* 灰色分隔线 */
	border-bottom: 1px solid #e0e0e0;
}

.theme-dark .journal-month-title {
	color: #e0e0e0 !important;
	border-bottom-color: #404040;
}

/* 手记卡片（参考手记应用设计） */
.journal-card {
	/* 手记应用风格：白色背景，无边框 */
	background: #ffffff !important;
	border-radius: 12px;
	padding: 16px;
	margin-bottom: 16px;
	cursor: pointer;
	transition: all 0.2s ease !important;
	/* 移除边框 */
	border: none !important;
	box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
	user-select: none;
	-webkit-user-select: none;
}

.theme-dark .journal-card {
	background: #2a2a2a !important;
	border: none !important;
	box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

.journal-card:hover {
	background: #ffffff !important;
	box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
	border: none !important;
	transform: translateY(-1px);
}

.theme-dark .journal-card:hover {
	background: #2d2d2d !important;
	border: none !important;
	box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
}

.journal-card:active {
	background: #fafafa !important;
	transform: translateY(0);
}

.theme-dark .journal-card:active {
	background: #2f2f2f !important;
}

.journal-date {
	font-size: 14px;
	/* 手记应用风格：灰色日期 */
	color: #666666 !important;
	margin-top: 12px;
	margin-bottom: 0;
	font-weight: 500;
}

.theme-dark .journal-date {
	color: #999999 !important;
}

.journal-title {
	font-size: 18px;
	font-weight: 600;
	/* 手记应用风格：深色标题 */
	color: #1a1a1a !important;
	margin: 0 0 8px 0;
	line-height: 1.4;
	display: -webkit-box;
	-webkit-line-clamp: 2;
	-webkit-box-orient: vertical;
	overflow: hidden;
}

.theme-dark .journal-title {
	color: #e0e0e0 !important;
}

/* 图片容器 - 基础样式 */
/* 编辑器预览模式下的图片布局 */
.markdown-preview-view .journal-images {
	display: grid;
	gap: 10px;
	margin: 16px 0;
	width: 100%;
	box-sizing: border-box;
}

.markdown-preview-view .journal-image-container {
	position: relative;
	overflow: hidden;
	border-radius: 8px;
	background: #e8e8e8;
	min-width: 0;
}

.markdown-preview-view .journal-image-container img {
	width: 100%;
	height: 100%;
	min-width: 100%;
	object-fit: cover;
	object-position: center;
	display: block;
}

.journal-images {
	display: grid;
	gap: 10px;
	margin-bottom: 12px;
	width: 100%;
	box-sizing: border-box;
}

/* 一张图片：16:9，宽度填满，高度自适应（保持16:9比例） */
.journal-images-single {
	grid-template-columns: 1fr;
}

.journal-images-single .journal-image-container {
	width: 100%;
	aspect-ratio: 16/9;
	/* 高度由aspect-ratio自动计算 */
}

/* 两张图片：左右排列，每张正方形 */
.journal-images-double {
	display: grid;
	grid-template-columns: 1fr 1fr;
	/* 容器宽高比 2:1（宽2高1），这样两张正方形图片并排 */
	aspect-ratio: 2/1;
	gap: 10px;
}

.journal-images-double .journal-image-container {
	/* 每张图片是正方形 1:1 */
	aspect-ratio: 1;
	width: 100%;
	/* 高度由 aspect-ratio 自动计算，等于宽度 */
	min-height: 0;
	overflow: hidden;
}

/* 三张图片：左边一张大正方形，右边2张上下排列 */
.journal-images-triple {
	grid-template-columns: 1fr 1fr;
	grid-template-rows: 1fr 1fr;
	/* 高度与单张16:9图片一致 */
	aspect-ratio: 16/9;
}

.journal-images-triple .journal-image-container-large {
	/* 左边第一张：占据左侧整列，高度100%，大正方形 */
	grid-row: 1 / 3;
	aspect-ratio: 1;
	width: 100%;
	height: 100%;
	min-height: 0;
}

.journal-images-triple .journal-image-container-small {
	/* 右边2张上下排列的小正方形 */
	aspect-ratio: 1;
	width: 100%;
	height: 100%;
	min-height: 0;
}

/* 四张图片：左半边一张大图，右半边三张（上1下2左右） */
.journal-images-quad {
	grid-template-columns: 1fr 1fr;
	grid-template-rows: 1fr 1fr;
	/* 高度与单张16:9图片一致 */
	aspect-ratio: 16/9;
}

.journal-images-quad .journal-image-container-quad-left {
	/* 第一张：左半边大图，占据左侧整列，高度100% */
	grid-row: 1 / 3;
	grid-column: 1;
	aspect-ratio: 1;
	width: 100%;
	height: 100%;
	min-height: 0;
}

.journal-images-quad .journal-image-container-quad-right-top {
	/* 第二张：右半边上半部分 */
	grid-row: 1;
	grid-column: 2;
	aspect-ratio: 1;
	width: 100%;
	height: 100%;
	min-height: 0;
}

/* 右半边下半部分包装器 */
.journal-images-quad-right-bottom {
	grid-row: 2;
	grid-column: 2;
	display: grid;
	grid-template-columns: 1fr 1fr;
	gap: 10px;
	width: 100%;
	height: 100%;
}

.journal-images-quad .journal-image-container-quad-right-bottom-left,
.journal-images-quad .journal-image-container-quad-right-bottom-right {
	/* 第三、四张：右半边下半部分左右排列 */
	aspect-ratio: 1;
	width: 100%;
	height: 100%;
	min-height: 0;
}

/* 五张或更多图片：左边一张大正方形，右边2x2网格 */
.journal-images-multiple {
	grid-template-columns: 1fr 1fr;
	grid-template-rows: 1fr 1fr;
	/* 高度与单张16:9图片一致 */
	aspect-ratio: 16/9;
}

.journal-images-multiple .journal-image-container-large {
	/* 左边第一张：占据左侧整列，高度100%，大正方形 */
	grid-row: 1 / 3;
	grid-column: 1;
	aspect-ratio: 1;
	width: 100%;
	height: 100%;
	min-height: 0;
}

/* 右边2x2网格包装器 */
.journal-images-multiple-right-grid {
	grid-row: 1 / 3;
	grid-column: 2;
	display: grid;
	grid-template-columns: 1fr 1fr;
	grid-template-rows: 1fr 1fr;
	gap: 10px;
	width: 100%;
	height: 100%;
}

.journal-images-multiple .journal-image-container-small {
	/* 右边2x2网格中的小正方形 */
	aspect-ratio: 1;
	width: 100%;
	height: 100%;
	min-height: 0;
}

.journal-image-container {
	position: relative;
	overflow: hidden;
	border-radius: 8px;
	/* 手记应用风格：浅灰色占位背景 */
	background: #e8e8e8;
	min-width: 0;
}

.journal-image {
	width: 100%;
	height: 100%;
	min-width: 100%;
	object-fit: cover;
	object-position: center;
	/* 居中裁剪，从中轴线截取 */
	display: block;
}

.journal-image-more {
	position: absolute !important;
	top: 0 !important;
	left: 0 !important;
	right: 0 !important;
	bottom: 0 !important;
	display: flex !important;
	align-items: center !important;
	justify-content: center !important;
	background: rgba(0, 0, 0, 0.6) !important;
	color: white !important;
	font-size: 24px !important;
	font-weight: 600 !important;
	pointer-events: none !important;
	z-index: 10 !important;
	border-radius: 8px !important;
}

.journal-load-more-trigger {
	visibility: hidden !important;
	opacity: 0 !important;
	pointer-events: none !important;
	position: absolute !important;
	height: 1px !important;
	width: 1px !important;
}

/* 内容预览 */
.journal-content {
	margin-bottom: 0;
}

.journal-preview {
	/* 手记应用风格：深色预览文字 */
	color: #333333 !important;
	line-height: 1.6;
	display: -webkit-box;
	-webkit-line-clamp: 3;
	-webkit-box-orient: vertical;
	overflow: hidden;
	font-size: 14px;
}

.theme-dark .journal-preview {
	color: #d0d0d0 !important;
}

/* 元数据 */
.journal-meta {
	display: flex;
	gap: 16px;
	font-size: 12px;
	color: var(--text-muted);
	margin-top: 12px;
	padding-top: 12px;
	/* 灰色分隔线 */
	border-top: 1px solid #e0e0e0;
}

.theme-dark .journal-meta {
	border-top-color: #404040;
}

.journal-meta-item {
	display: flex;
	align-items: center;
}

/* 响应式设计 */
@media (max-width: 768px) {
	.journal-view-container {
		padding: 10px;
	}

	.journal-title-container {
		flex-direction: column;
		align-items: stretch;
		gap: 12px;
	}

	.journal-title-header {
		font-size: 24px;
	}

	.journal-create-button {
		width: 100%;
		justify-content: center;
		padding: 12px 20px;
	}

	.journal-stats {
		/* 保持横向排列，适应手机屏幕 */
		flex-direction: row !important;
		flex-wrap: wrap;
		gap: 16px;
		justify-content: space-between;
	}

	.journal-stat-item {
		/* 允许每个项自适应宽度，但保持横向排列 */
		flex: 1 1 auto;
		min-width: 0;
		max-width: none;
	}

	/* 手机端调整统计项字体大小 */
	.journal-stat-value {
		font-size: 18px;
	}

	.journal-stat-label {
		font-size: 12px;
	}

	.journal-stat-icon svg {
		width: 18px;
		height: 18px;
	}

	/* 手机端：保持布局规则，但确保图片宽度填满 */
	/* 注意：不要覆盖 .journal-images-double 和 .journal-images-multiple 的布局 */
	.journal-images-single {
		grid-template-columns: 1fr !important;
	}

	.journal-images-double {
		grid-template-columns: 1fr 1fr !important;
	}

	.journal-images-multiple {
		grid-template-columns: 1fr 1fr !important;
		grid-template-rows: 1fr 1fr !important;
	}

	.journal-images-multiple-right-grid {
		grid-template-columns: 1fr 1fr !important;
		grid-template-rows: 1fr 1fr !important;
		gap: 8px;
	}

	.journal-card {
		padding: 16px;
	}
}

/* 超小屏幕优化（手机竖屏） */
@media (max-width: 480px) {
	.journal-stats {
		gap: 12px;
	}

	.journal-stat-value {
		font-size: 16px;
	}

	.journal-stat-label {
		font-size: 11px;
	}

	.journal-stat-icon svg {
		width: 16px;
		height: 16px;
	}
}